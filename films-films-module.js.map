{"version":3,"sources":["./src/app/films/films-list/films-list.component.html","./src/app/films/films-list/films-list.component.ts","./src/app/films/films.service.ts","./src/app/films/films-detail/film-detail.component.ts","./src/app/films/films-detail/films-detail.component.html","./src/app/films/films-routing.module.ts","./src/app/films/films.module.ts","./src/app/films/film.model.ts"],"names":[],"mappings":"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","file":"films-films-module.js","sourcesContent":["<link-component tab=\"films\"></link-component>\n<div class=\"row\">\n  <div class=\"col-md-12\">\n    <table class=\"table table-striped table-hover\">\n      <tbody>\n        <tr *ngFor=\"let film of films\">\n          <td [innerText]=\"film.title\"></td>\n          <td [innerText]=\"film.director\"></td>\n          <td [innerText]=\"film.episodeId\"></td>\n          <td>\n            <a href=\"films/{{film.id}}\">More Details</a>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { Subscription } from 'rxjs/internal/Subscription';\nimport { Film } from '../film.model';\nimport { FilmsService } from '../films.service';\n\n@Component({\n  selector: 'app-film-list',\n  templateUrl: './films-list.component.html',\n  styleUrls: ['./films-list.component.scss']\n})\nexport class FilmsListComponent implements OnInit, OnDestroy {\n\n  private paramsSubscription!: Subscription;\n  private filmsSubscription!: Subscription;\n  public  films: Array<Film> = new Array<Film>();\n\n  constructor(private filmService: FilmsService, private activatedRoute: ActivatedRoute) { }\n\n  ngOnInit(): void {\n\n    this.filmsSubscription = this.filmService.films.subscribe(result => this.films = result);\n\n    this.paramsSubscription = this.activatedRoute.queryParams.subscribe({\n      next: (params: Params) => {\n        if(params.search){\n          this.filmService.search(params.search);\n        }else{\n          this.filmService.getFilms();\n        }\n      }\n    });\n\n  }\n\n  ngOnDestroy(): void {\n    this.paramsSubscription.unsubscribe();\n    this.filmsSubscription.unsubscribe();\n  }\n\n}\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\r\nimport { Observable } from 'rxjs/internal/Observable';\r\nimport { map, take } from 'rxjs/operators';\r\nimport { Film } from './film.model';\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class FilmsService {\r\n\r\n  private films$: BehaviorSubject<Array<Film>> = new BehaviorSubject<Array<Film>>([]);\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  public get films(): Observable<Array<Film>> {\r\n    return this.films$.asObservable();\r\n  }\r\n\r\n  public get(id: number): Observable<Film> {\r\n\r\n    return this.http.get<any>(`https://swapi.dev/api/films/${id}`)\r\n            .pipe(\r\n              map<any, Film>(value => this.mapFilm(value))\r\n            );\r\n  }\r\n\r\n  public getFilms(){\r\n\r\n    this.http.get<any>(`https://swapi.dev/api/films`)\r\n      .pipe(\r\n        take(10),\r\n        map<any, Array<Film>>(\r\n          result => result.results.map((value:any) => this.mapFilm(value))\r\n        )\r\n      )\r\n      .subscribe({\r\n        next: result => this.films$.next(result)\r\n      });\r\n\r\n    return this.films$.asObservable();\r\n  }\r\n\r\n  public search(value: string){\r\n\r\n    this.http.get<any>(`https://swapi.dev/api/films?search=${value}`)\r\n      .pipe(\r\n        take(10),\r\n        map<any, Array<Film>>(\r\n          result => result.results.map((value:any) => this.mapFilm(value))\r\n        ),\r\n      )\r\n      .subscribe({\r\n        next: result => this.films$.next(result)\r\n      });\r\n\r\n    return this.films$.asObservable();\r\n  }\r\n\r\n  private mapFilm(value: any): Film {\r\n\r\n    const id: string = (<string>value.url).substring(value.url.lastIndexOf('/', value.url.length - 2) + 1, value.url.lastIndexOf('/'));\r\n\r\n    let film = new Film();\r\n    film.id = parseInt(id);\r\n    film.director = value.director;\r\n    film.episodeId = value.episode_id;\r\n    film.openingCrawl = value.opening_crawl;\r\n    film.producer = value.producer;\r\n    film.title = value.title;\r\n\r\n    return film;\r\n  }\r\n}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { Subscription } from 'rxjs/internal/Subscription';\nimport { Film } from '../film.model';\nimport { FilmsService } from '../films.service';\n\n@Component({\n  selector: 'app-film-detail',\n  templateUrl: './films-detail.component.html',\n  styleUrls: ['./films-detail.component.scss']\n})\nexport class FilmsDetailComponent implements OnInit, OnDestroy {\n\n  private filmSub!: Subscription;\n  private paramsSub!: Subscription;\n\n  public film:Film | undefined = new Film();\n\n  constructor(private filmService: FilmsService, private activatedRoute: ActivatedRoute) {\n\n  }\n\n  ngOnInit(): void {\n\n    this.paramsSub = this.activatedRoute.params.subscribe({\n      next: (params: Params) => {\n\n          if(params.id){\n\n            this.filmSub = this.filmService.get(params.id).subscribe(\n              { next: result => {\n                this.film = result;\n              },\n              error: (error) => {\n                this.film = undefined;\n              }\n            })\n          }\n        }\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.paramsSub.unsubscribe();\n    this.filmSub.unsubscribe();\n  }\n}\n","<link-component tab=\"films\"></link-component>\n\n<div *ngIf=\"film; else nothingFound\">\n  <h4>Details</h4>\n  <hr>\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <div class=\"field\">\n        <label class=\"field-label\">Title</label>\n        <div class=\"field-value\">{{ film.title }}</div>\n      </div>\n    </div>\n    <div class=\"col-md-6\">\n      <div class=\"field\">\n        <label class=\"field-label\">Director</label>\n        <div class=\"field-value\">{{ film.director }}</div>\n      </div>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <div class=\"field\">\n        <label class=\"field-label\">Episode</label>\n        <div class=\"field-value\">{{ film.episodeId }}</div>\n      </div>\n    </div>\n    <div class=\"col-md-6\">\n      <div class=\"field\">\n        <label class=\"field-label\">Producer</label>\n        <div class=\"field-value\">{{ film.producer }}</div>\n      </div>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div class=\"field\">\n        <label class=\"field-label\">Opening crawl</label>\n        <div class=\"field-value\">{{ film.openingCrawl }}</div>\n      </div>\n    </div>\n  </div>\n  <hr>\n  <div class=\"row\">\n    <div class=\"col-md-12 content-right\">\n      <a class=\"btn btn-primary\" routerLink=\"/films\">Back</a>\n    </div>\n  </div>\n</div>\n<ng-template #nothingFound>\n  <div>\n    <h4 class=\"text-center message\">Film not found</h4>\n  </div>\n</ng-template>\n\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { FilmsDetailComponent } from './films-detail/film-detail.component';\nimport { FilmsListComponent } from './films-list/films-list.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FilmsListComponent\n  },\n  {\n    path: ':id',\n    component: FilmsDetailComponent,\n  },\n  {\n    path: '**',\n    component: FilmsListComponent\n  },\n]\n\n@NgModule({\n  declarations: [],\n  imports: [\n    RouterModule.forChild(routes)\n  ]\n})\nexport class FilmRoutingModule { }\n","import { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FilmRoutingModule } from './films-routing.module';\nimport { FilmsListComponent } from './films-list/films-list.component';\nimport { FilmsDetailComponent } from './films-detail/film-detail.component';\nimport { LinkModule } from '../components/link/link.module';\nimport { HttpClientModule } from '@angular/common/http';\n\n@NgModule({\n  declarations: [\n    FilmsListComponent,\n    FilmsDetailComponent\n  ],\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    FilmRoutingModule,\n    LinkModule,\n    RouterModule\n  ]\n})\nexport class FilmsModule { }\n","export class Film {\r\n  public director!: string;\r\n  public title!: string;\r\n  public producer!: string;\r\n  public episodeId!: string;\r\n  public openingCrawl!: string;\r\n  public id!: number;\r\n}\r\n"],"sourceRoot":"webpack:///"}